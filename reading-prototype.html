<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Inline Assistant - Reading Mode Prototype</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      background: #f5f5f5;
      padding: 16px;
      line-height: 1.6;
    }

    .article {
      max-width: 600px;
      margin: 0 auto;
      background: white;
      padding: 24px;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .article h1 {
      font-size: 28px;
      margin-bottom: 8px;
      color: #1a1a1a;
    }

    .article .meta {
      color: #666;
      font-size: 14px;
      margin-bottom: 24px;
    }

    .article p {
      margin-bottom: 16px;
      color: #333;
      font-size: 16px;
      cursor: pointer;
      padding: 8px;
      border-radius: 6px;
      transition: background 0.2s;
      user-select: none;
      -webkit-user-select: none;
    }

    .article p:hover {
      background: #f0f0f0;
    }

    .article p.selected {
      background: #e3f2fd;
      position: relative;
    }

    .assistant-popup {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: white;
      border-radius: 16px 16px 0 0;
      box-shadow: 0 -4px 20px rgba(0,0,0,0.15);
      padding: 20px;
      transform: translateY(100%);
      transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      z-index: 1000;
      max-height: 70vh;
      overflow-y: auto;
    }

    .assistant-popup.visible {
      transform: translateY(0);
    }

    .popup-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 16px;
      padding-bottom: 12px;
      border-bottom: 1px solid #e0e0e0;
    }

    .popup-title {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 16px;
      font-weight: 600;
      color: #1a1a1a;
    }

    .comet-icon {
      width: 20px;
      height: 20px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 50%;
    }

    .close-btn {
      width: 32px;
      height: 32px;
      border: none;
      background: #f0f0f0;
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      color: #666;
    }

    .quick-actions {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 8px;
      margin-bottom: 16px;
    }

    .action-btn {
      padding: 12px 16px;
      border: 1px solid #e0e0e0;
      background: white;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      gap: 8px;
      color: #333;
    }

    .action-btn:active {
      background: #f5f5f5;
      transform: scale(0.98);
    }

    .action-btn .icon {
      font-size: 18px;
    }

    .custom-input {
      position: relative;
      margin-top: 12px;
    }

    .custom-input input {
      width: 100%;
      padding: 12px 16px;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      font-size: 15px;
      outline: none;
      transition: border-color 0.2s;
    }

    .custom-input input:focus {
      border-color: #667eea;
    }

    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.3);
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s;
      z-index: 999;
    }

    .overlay.visible {
      opacity: 1;
      pointer-events: auto;
    }

    .selected-text-preview {
      background: #f5f5f5;
      padding: 12px;
      border-radius: 8px;
      margin-bottom: 16px;
      font-size: 14px;
      color: #666;
      max-height: 100px;
      overflow-y: auto;
      line-height: 1.5;
    }
  </style>
</head>
<body>
  <div class="article">
    <h1>The Future of AI Assistants</h1>
    <div class="meta">Published on Feb 19, 2026 ‚Ä¢ 5 min read</div>

    <p data-id="p1">Artificial intelligence has transformed how we interact with technology. From simple chatbots to sophisticated language models, AI assistants have become an integral part of our daily digital lives.</p>

    <p data-id="p2">The latest generation of AI assistants can understand context, provide nuanced responses, and even help with complex tasks like writing code or analyzing data. This evolution has been driven by advances in machine learning and natural language processing.</p>

    <p data-id="p3">One emerging trend is the integration of AI assistants directly into browsing experiences. Rather than switching between tabs or applications, users can get instant help with selected text or content they're reading.</p>

    <p data-id="p4">Mobile implementations present unique challenges. Text selection is more difficult on touch screens, and screen real estate is limited. Designers must balance functionality with usability, creating interfaces that feel natural on smaller devices.</p>

    <p data-id="p5">The key to success lies in understanding user behavior. On mobile, quick actions and contextual suggestions work better than complex interfaces. Users want instant results without interrupting their reading flow.</p>
  </div>

  <div class="overlay" id="overlay"></div>

  <div class="assistant-popup" id="popup">
    <div class="popup-header">
      <div class="popup-title">
        <div class="comet-icon"></div>
        <span>Reading Assistant</span>
      </div>
      <button class="close-btn" onclick="hidePopup()">√ó</button>
    </div>

    <div class="selected-text-preview" id="selectedText"></div>

    <div class="quick-actions">
      <button class="action-btn" onclick="handleAction('fact-check')">
        <span class="icon">‚úì</span>
        <span>Fact-check</span>
      </button>
      <button class="action-btn" onclick="handleAction('define')">
        <span class="icon">üìñ</span>
        <span>Define</span>
      </button>
      <button class="action-btn" onclick="handleAction('summarize')">
        <span class="icon">üìù</span>
        <span>Summarize</span>
      </button>
      <button class="action-btn" onclick="handleAction('translate')">
        <span class="icon">üåê</span>
        <span>Translate</span>
      </button>
      <button class="action-btn" onclick="handleAction('explain')">
        <span class="icon">üí°</span>
        <span>Explain</span>
      </button>
      <button class="action-btn" onclick="handleAction('related')">
        <span class="icon">üîó</span>
        <span>Related info</span>
      </button>
    </div>

    <div class="custom-input">
      <input
        type="text"
        placeholder="Or ask anything about this text..."
        id="customInput"
        onkeypress="handleCustomInput(event)"
      />
    </div>
  </div>

  <script>
    let selectedParagraph = null;

    document.querySelectorAll('.article p').forEach(p => {
      p.addEventListener('click', function() {
        // Deselect previous
        if (selectedParagraph) {
          selectedParagraph.classList.remove('selected');
        }

        // Select new
        this.classList.add('selected');
        selectedParagraph = this;

        // Show popup with selected text
        const text = this.textContent;
        document.getElementById('selectedText').textContent = text;
        showPopup();
      });
    });

    function showPopup() {
      document.getElementById('popup').classList.add('visible');
      document.getElementById('overlay').classList.add('visible');
      document.body.style.overflow = 'hidden';
    }

    function hidePopup() {
      document.getElementById('popup').classList.remove('visible');
      document.getElementById('overlay').classList.remove('visible');
      document.body.style.overflow = '';

      if (selectedParagraph) {
        selectedParagraph.classList.remove('selected');
        selectedParagraph = null;
      }
    }

    document.getElementById('overlay').addEventListener('click', hidePopup);

    function handleAction(action) {
      const text = document.getElementById('selectedText').textContent;
      console.log('Action:', action, 'on text:', text.substring(0, 50) + '...');
      alert(`Action: ${action}\n\nIn real app, this would:\n1. Send text to backend\n2. Open sidecar with result\n3. Hide this popup`);
      hidePopup();
    }

    function handleCustomInput(event) {
      if (event.key === 'Enter') {
        const query = event.target.value;
        const text = document.getElementById('selectedText').textContent;
        console.log('Custom query:', query, 'on text:', text.substring(0, 50) + '...');
        alert(`Custom query: "${query}"\n\nIn real app, this would:\n1. Send query + selected text to backend\n2. Open sidecar with result\n3. Hide this popup`);
        hidePopup();
      }
    }
  </script>
</body>
</html>
